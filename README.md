# Документация по телеграм-боту PsihoTips

## Обзор проекта

PsihoTips Bot - это телеграм-бот для поддержки ментального здоровья, разработанный как помощник врача-психотерапевта. Бот предоставляет пользователям доступ к различным инструментам для поддержки психического здоровья, включая ежедневные советы, психологические тесты, техники самопомощи, отслеживание настроения и возможность задавать анонимные вопросы психологу.

## Основные функции

1. **Ежедневные советы** - получение советов по поддержанию ментального здоровья
2. **Психологические тесты** - прохождение стандартизированных психологических тестов с интерпретацией результатов
3. **Техники самопомощи** - доступ к различным техникам для работы с тревогой, стрессом, бессонницей и другими состояниями
4. **Отслеживание настроения** - возможность отслеживать свое настроение и вести заметки о факторах, влияющих на него
5. **Анонимные вопросы психологу** - возможность задать вопрос специалисту и получить ответ
6. **Настройки уведомлений** - управление уведомлениями и временем получения ежедневных советов

## Архитектура проекта

Проект имеет модульную архитектуру, состоящую из следующих компонентов:

- **main.py** - основной файл для запуска бота
- **config.py** - файл конфигурации с настройками бота
- **database.py** - модуль для работы с базой данных
- **handlers.py** - обработчики команд и сообщений
- **utils.py** - вспомогательные функции
- **data/** - директория с данными для бота
  - **tips.py** - ежедневные советы
  - **tests.py** - психологические тесты
  - **techniques.py** - техники самопомощи

## Требования

- Python 3.8 или выше
- python-telegram-bot 20.0 или выше
- SQLite или PostgreSQL (в зависимости от настроек)
- Дополнительные зависимости указаны в файле requirements.txt

## Установка и запуск

1. Клонируйте репозиторий или распакуйте архив с проектом
2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
3. Настройте конфигурацию в файле `config.py`:
   - Укажите токен бота (получите у @BotFather в Telegram)
   - Укажите ID администратора (ваш ID в Telegram)
   - При необходимости настройте другие параметры
4. Запустите бота:
   ```
   python main.py
   ```

## База данных

Бот поддерживает два типа баз данных:
- **SQLite** (по умолчанию) - для небольших проектов и тестирования
- **PostgreSQL** - для продакшн-окружения с большим количеством пользователей

Схема базы данных включает следующие таблицы:
- `users` - информация о пользователях
- `user_settings` - настройки пользователей
- `command_logs` - логи использования команд
- `daily_tips` - история отправленных советов
- `anonymous_questions` - анонимные вопросы и ответы
- `test_results` - результаты психологических тестов
- `mood_tracking` - записи отслеживания настроения

## Административные функции

Администратор бота (указанный в `config.py`) имеет доступ к следующим функциям:
- Просмотр списка анонимных вопросов (`/list_questions`)
- Ответ на анонимные вопросы (`/reply_ID`)
- Получение уведомлений о новых вопросах
- Получение уведомлений о запуске бота

## Защита от злоупотреблений

Бот включает механизмы защиты от злоупотреблений:
- Ограничение частоты запросов советов дня
- Ограничение частоты отправки анонимных вопросов
- Ограничение частоты прохождения психологических тестов

## Расширение функциональности

Для добавления новых функций:
1. Добавьте новые обработчики в файл `handlers.py`
2. Зарегистрируйте обработчики в функции `main()` в файле `main.py`
3. При необходимости добавьте новые таблицы в базу данных через `database.py`
4. Обновите команды бота в функции `setup_commands()` в файле `main.py`

## Рекомендации по развертыванию

Для продакшн-окружения рекомендуется:
1. Использовать PostgreSQL вместо SQLite
2. Настроить логирование в файл
3. Использовать systemd или supervisor для автоматического перезапуска бота
4. Настроить регулярное резервное копирование базы данных

## Контакты и поддержка

При возникновении вопросов или проблем обращайтесь к разработчику.

---

© 2025 PsihoTips Bot. Все права защищены.
